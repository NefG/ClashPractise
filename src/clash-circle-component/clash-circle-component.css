.clash-circle {
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;

  /* CONFIG */
  --inner-radius: 60px;
  --outer-radius-start: 100px;
  --outer-radius-end: 40px; /* Now smaller than inner-radius */
  --progress: 0.4; /* 0 to 1 */

  /* CALCULATIONS */
  --current-outer: calc(var(--outer-radius-start) + (var(--outer-radius-end) - var(--outer-radius-start)) * var(--progress));

  width: calc(var(--outer-radius-start) * 2);
  height: calc(var(--outer-radius-start) * 2);
}

.clash-circle::after {
  content: "";
  position: absolute;
  width: calc(var(--current-outer) * 2);
  height: calc(var(--current-outer) * 2);
  border-radius: 50%;

  /* 1. THE WHITE CENTER LINE */
  /* We use a thin border for the 'core' of the light */
  border: 2px solid rgba(255, 255, 255, 0.9);

  /* 2. THE DARK BLUE GLOW (Internal and External) */
  /* box-shadow: [x] [y] [blur] [spread] [color] */
  box-shadow:
    /* Outer dark blue bloom */
    0 0 5px 1px rgba(0, 110, 255, 0.8),
    0 0 10px 2px rgba(0, 70, 255, 0.5),
      /* Inner dark blue bloom */
    inset 0 0 20px 2px rgba(0, 110, 255, 0.8),
    inset 0 0 20px 5px rgba(0, 70, 255, 0.5);

  /* 3. OPTIONAL: A faint blue "energy" fill */
  background: radial-gradient(
    circle,
    transparent 70%,
    rgba(0, 100, 255, 0.15) 100%
  );

  z-index: 1;
  pointer-events: none;
}

/* 2. THE STATIC INNER RING */
.clash-circle::before {
  content: "";
  position: absolute;
  width: calc(var(--inner-radius) * 2);
  height: calc(var(--inner-radius) * 2);
  border-radius: 50%;
  z-index: 0;

  /* 1. THE WHITE CORE LINE (Slightly more transparent than the outer ring) */
  border: 4px solid rgba(255, 255, 255, 0.5);

  /* 2. THE OUTSET BLUE GLOW */
  box-shadow:
    0 0 8px 1px rgba(0, 110, 255, 0.6),  /* Primary bloom */
    0 0 15px 2px rgba(0, 70, 255, 0.3);  /* Softer outer atmosphere */

  /* Optional: faint internal glow to keep it from looking hollow */
  background: radial-gradient(
    circle,
    transparent 80%,
    rgba(0, 100, 255, 0.05) 100%
  );

  transition: all 0.3s ease; /* Smooth transition for the success swap */
}

/* KEY CAP BASE */
.clash-circle span {
  z-index: 2;
  width: 36px;
  height: 36px;
  background: #ffffff; /* Clean white background */
  border-radius: 8px;

  /* Text Styles */
  font-family: 'Arial Black', sans-serif;
  font-weight: 900;
  font-size: 20px;
  color: #444; /* Darker grey for the 'printed' look */

  box-sizing: border-box;
  display: flex;
  align-items: center;
  justify-content: center;
  padding-bottom: 6px;

  /* 3D KEY EFFECT */
  /* Top shadow for highlight, bottom dark shadow for thickness */
  box-shadow:
    inset 0 2px 0 rgba(255,255,255,1),  /* Top inner highlight */
    inset 0 -4px 0 rgba(0,0,0,0.1),      /* Bottom inner depth */
    0 4px 0 #d1d1d1,                     /* The 'side' of the key */
    0 5px 10px rgba(0,0,0,0.2);          /* The shadow on the floor */

  border: 1px solid #e0e0e0;
  transition: all 0.1s ease;
}

/* THE LABEL BASE */
.clash-circle .label {
  position: absolute;
  bottom: 32px; /* Positions it below the circle */
  left: 50%;
  z-index: 100;
  transform: translateX(-50%);

  color: #fff; /* White core for the 'bright' look */
  font-family: 'Arial Black', sans-serif;
  font-size: 14px;
  white-space: nowrap;

  /* The Golden Glow */
  filter: drop-shadow(0 0 5px #0051ff)
          drop-shadow(0 0 15px #0800ff);

  animation: labelPop 0.1s ease-out;
}

@keyframes labelPop {
  0% { transform: translateX(-50%) scale(0.5); opacity: 0; }
  100% { transform: translateX(-50%) scale(1); opacity: 1; }
}

/* THE HORIZONTAL LINES */
.label::before {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: 120px; /* How far the lines stretch */
  height: 4px;  /* The thickness of the line */
  transform: translate(-50%, -50%);
  z-index: -1; /* Behind the text */

  /* Radial gradient makes the line brightest in center and fade at edges */
  background: radial-gradient(
    ellipse at center,
    rgba(0, 81, 255, 1) 0%,
    rgba(8, 0, 255, 0.6) 20%,
    transparent 70%
  );

  filter: blur(0.5);
}

/* OPTIONAL: Success animation to make lines "streak" out */
.clash-circle.success .label::before,
.clash-circle.success .label::after {
  animation: flareStreak 0.4s ease-out forwards;
}

@keyframes flareStreak {
  0% { width: 0; opacity: 0; }
  100% { width: 500px; opacity: 1; }
}

/* SUCCESS STATE: Golden Swap */
.clash-circle.success-perfect::after {
  /* Change the ring to gold */
  border-color: #fff9e6;
  box-shadow:
    0 0 10px 2px rgba(255, 200, 0, 0.9),
    0 0 25px 8px rgba(255, 140, 0, 0.6),
    inset 0 0 10px 2px rgba(255, 200, 0, 0.9);
}

.clash-circle.success-perfect .label {
  color: #fff; /* White core makes the text pop */
  filter: drop-shadow(0 0 8px #ffcc00)
          drop-shadow(0 0 20px #ffae00);
}

.clash-circle.success-perfect .label::before {
  width: 160px;
  background: radial-gradient(
    ellipse at center,
    rgba(255, 220, 100, 1) 0%,
    rgba(255, 150, 0, 0.6) 20%,
    transparent 70%
  );
}


/* FAIL STATE: Red Alert */
/* 1. THE RINGS (Outer) */
.clash-circle.fail-red::after {
  border-color: rgba(255, 200, 200, 0.9); /* Pink-ish white core */
  box-shadow:
    0 0 10px 2px rgba(255, 0, 0, 0.8),   /* Primary red bloom */
    0 0 25px 5px rgba(150, 0, 0, 0.5),   /* Deeper red atmosphere */
    inset 0 0 15px rgba(255, 0, 0, 0.4);
}

/* 2. THE LABEL & FLARE */
.clash-circle.fail-red .label {
  color: #ffffff;
  filter:
    drop-shadow(0 0 4px #ff9999)      /* 1. Light red core */
    drop-shadow(0 0 12px #ff0000)     /* 2. Intense red body */
    drop-shadow(0 0 30px #990000);

}

.clash-circle.fail-red .label::before {
  width: 100px;
  background: radial-gradient(
    ellipse at center,
    rgba(255, 100, 100, 1) 0%,
    rgba(200, 0, 0, 0.8) 30%,
    transparent 70%
  );
}

/* 3. THE KEYCAP */
.clash-circle.fail-red span {
  color: #ff0000;
  border-color: #ff6666;
  box-shadow:
    inset 0 2px 0 rgba(255,255,255,1),
    0 4px 0 #cc0000, /* Darker red side for the key */
    0 0 15px rgba(255, 0, 0, 0.6);
}
